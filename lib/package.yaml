<<: !include "../hpack/module.yaml"

name: disciplina
description: A blockchain system for education

library:
  <<: *lib-common

  dependencies:
    - aeson
    - aeson-options
    - autoexporter
    - array
    - AVL
    - bytestring
    - base58-bytestring
    - containers
    - componentm
    - cryptonite
    - cryptonite-openssl
    - data-default
    - digest
    - directory
    - direct-sqlite
    - exceptions
    - formatting
    - filepath
    - fmt
    - free
    - hashable
    - interpolatedstring-perl6
    - lens
    - loot-base
    - loot-log
    - loot-network
    - log-warper
    - memory
    - monad-control
    - mtl
    - optparse-applicative
    - prettyprinter
    - random
    - reflection
    - rocksdb-haskell
    - semver
    - serialise
    - serokell-util
    - servant-server
    - snowdrop
    - sqlite-simple
    - stm
    - template-haskell
    - text
    - text-format
    - time
    - time-units
    - unix
    - unliftio
    - warp

tests:
  disciplina-test:
    <<: *test-common

    dependencies:
      - aeson
      - AVL
      - bytestring
      - containers
      - cryptonite
      - directory
      - disciplina
      - data-default
      - hspec
      - lens
      - loot-log
      - memory
      - safe-exceptions >= 0.1.4
      - serialise
      - sqlite-simple
      - tasty
      - tasty-hspec
      - tasty-discover
      - time
      - QuickCheck
      - quickcheck-instances

executables:
  disciplina-witness:
    <<: *exec-common
    source-dirs: witness
    dependencies:
      - bytestring
      - disciplina
      - formatting
      - loot-log
      - time-units
      - optparse-applicative
      - random
      - unliftio
  disciplina-educator:
    <<: *exec-common
    source-dirs: educator
    dependencies:
      - disciplina
      - formatting
      - loot-log
      - optparse-applicative
      - unliftio
